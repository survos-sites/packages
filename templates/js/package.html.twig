{% set _sc = 'reveal' %}

<div class="card h-100">
    <div class="card-header d-flex justify-content-between align-items-center gap-2">
        <b>
            <a href="{{ hit.repo }}?tab=readme-ov-file" target="_blank">

                {#        {{ hit._highlightResult.name.value }}#}
                <span>
            {{ hit._highlightResult.vendor.value }}/</br>
        </span><span class="fs-4">{{ hit._highlightResult.shortName.value }}</span>
            </a>
        </b>
        <div class="badge bg-white text-warning d-flex align-items-center gap-1">
            {# <twig:ux:icon name="bi:star-fill" /> #}
            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentColor" d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327l4.898.696c.441.062.612.636.282.95l-3.522 3.356l.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/></svg>
            <span class="align-bottom lh-base">{{hit._highlightResult.stars.value}}</span>
        </div>
    </div>

    <div class="card-body">
        <div class="blockquote">

            {{ hit._highlightResult.description.value|raw }}
        </div>
        <div>
            PHP: {{ hit.phpVersionString ?: 'undefined' }}
{#            {% for v in hit.phpVersions %}#}
{#                <span class="badge bg-secondary me-1">{{ v }}</span>#}
{#            {% endfor %}#}
        </div>

{{ hit.stars ? hit.stars ~ ' stars' }}

        {% for keywork in hit.keywords %}
            <span>{{ keyword }}</span>
        {% endfor %}


        {{ hit.version }}
        {% if hit.lastUpdatedOnPackagist %}
            Last updated:
            <span {{ stimulus_controller('timeago', {datetime: hit.lastUpdatedOnPackagist }) }}>
                    {{ hit.lastUpdatedOnPackagist|date }}
                </span>
        {% endif %}

    </div>

    <div class="card-footer clearfix d-flex float-end xjustify-content-end align-items-center gap-2 flex-wrap">
        <code class="bg-transparent">{{ hit.marking }}</code>
        <div class="d-flex align-items-center gap-1 flex-grow-1">
            {% for v in hit.symfonyVersions %}
                <span class="badge bg-primary">{{ v }}</span>
            {% endfor %}
        </div>

        <span>
            {% if hit._rankingScore != 1 %}
                score: {{ hit._rankingScore|number_format(2) }}
            {% endif %}
        </span>

        {% for phpVersion in hit.phpVersions %}
            <li>
                {{ phpVersion }}
            </li>
        {% endfor %}

        <a target="_blank" href="{{ path('admin_bundle_show', hit.rp) }}" class="btn btn-sm btn-outline-primary">
            Details
        </a>

{#        {{ globals|keys|json_encode }}#}
{#        {% set globals = {#}
{#            packagistIcon: ux_icon('simple-icons:packagist'),#}
{#            githubIcon: ux_icon('tabler:brand-github'),#}
{#            iconMap: {#}
{#                new:  ux_icon('clarity:new-line'),#}
{#                composer_loaded: ux_icon('logos:composer'),#}
{#                php_too_old:  ux_icon('icon-park-outline:invalid-files', {class: 'bg-danger text-white'}),#}
{#            }#}
{#        } %}#}

        <a href="https://packagist.org/packages/{{ hit.name }}" target="_blank">
            {{ globals.packagistIcon }}
            On Packagist
            {#                <span class="bi bi-github"></span> #}
        </a>
        <br />


        <button
            {{ stimulus_action(globals._sc_modal, 'modal') }}
            data-hit-id="{{ hit.id }}"
            class="btn btn-sm btn-outline-primary">
            {{ icons.json }}
        </button>

    </div>
</div>



{#{{ custom_render({hit: hit}) }}#}
{# this renders the modal button!  Could be a hacky custom tag #}
{#<div {{ stimulus_controller(_sc, {id: hit.id,#}
{#    serverUrl: globals.serverUrl,#}
{#    serverApiKey: globals.serverApiKey,#}
{#    indexName: globals.indexName,#}

{#}) }}#}
{#    {{ stimulus_action(_sc, 'backdropClose') }}#}
{#>#}
{#    <button type="button" {{ stimulus_action(_sc, 'open') }}>#}
{#        {{ icons.json|raw }}#}
{#         {{ hit.id }}</button>#}
{#</div>#}


{#{% set _sc_modal = 'modal' %}#}
{#{% if globals.debug|default(false) %}#}
{##{{ hit.__hitIndex }} ({{ hit.__position }})#}
{#<button#}
{#    data-hit-id="{{ hit.id }}"#}
{#    data-hit-json="{{ hit|json_encode|escape }}"#}
{#    {{ stimulus_action(_sc, 'debug') }}>#}
{#    {{ hit.id }}#}
{#    MODAL#}
{#</button>#}

{#{% endif %}#}



